<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Assets</title>
    <style>
        body { font-family: monospace; padding: 20px; }
        .test-item { margin: 10px 0; padding: 10px; border: 1px solid #ccc; }
        .success { background-color: #d4edda; color: #155724; }
        .error { background-color: #f8d7da; color: #721c24; }
        img { max-width: 100px; max-height: 100px; margin: 5px; }
    </style>
</head>
<body>
    <h1>Test de chargement des assets</h1>
    <div id="results"></div>

    <script>
        const assets = [
            'assets/logo.png',
            'assets/background.jpg',
            'assets/maps/world_map.png',
            'assets/sprites/pokeball.png',
            'assets/sprites/superball.png',
            'assets/sprites/hyperball.png',
            'assets/sprites/player_01.png',
            'assets/sprites/player_02.png',
            'assets/sprites/pokemon/magicarpe.png',
            'assets/sprites/pokemon/tentacool.png'
        ];

        const scripts = [
            'scripts/map_data.js',
            'scripts/player.js',
            'scripts/map.js',
            'scripts/pokemon.js',
            'scripts/game.js'
        ];

        const resultsDiv = document.getElementById('results');

        function testAsset(src, type = 'image') {
            return new Promise((resolve) => {
                if (type === 'image') {
                    const img = new Image();
                    img.onload = () => resolve({ src, success: true, error: null });
                    img.onerror = () => resolve({ src, success: false, error: 'Image non trouv√©e' });
                    img.src = src;
                } else if (type === 'script') {
                    fetch(src)
                        .then(response => {
                            if (response.ok) {
                                resolve({ src, success: true, error: null });
                            } else {
                                resolve({ src, success: false, error: `HTTP ${response.status}` });
                            }
                        })
                        .catch(error => {
                            resolve({ src, success: false, error: error.message });
                        });
                }
            });
        }

        async function runTests() {
            resultsDiv.innerHTML = '<p>Test en cours...</p>';
            
            // Test des images
            const imageResults = await Promise.all(assets.map(asset => testAsset(asset, 'image')));
            
            // Test des scripts
            const scriptResults = await Promise.all(scripts.map(script => testAsset(script, 'script')));
            
            const allResults = [...imageResults, ...scriptResults];
            
            let html = '<h2>R√©sultats des tests :</h2>';
            
            allResults.forEach(result => {
                const className = result.success ? 'success' : 'error';
                const status = result.success ? '‚úÖ OK' : `‚ùå ERREUR: ${result.error}`;
                
                html += `
                    <div class="test-item ${className}">
                        <strong>${result.src}</strong> - ${status}
                        ${result.success && result.src.includes('.png') ? `<br><img src="${result.src}" alt="Preview">` : ''}
                    </div>
                `;
            });
            
            const successCount = allResults.filter(r => r.success).length;
            const totalCount = allResults.length;
            
            html += `<h3>R√©sum√©: ${successCount}/${totalCount} fichiers charg√©s avec succ√®s</h3>`;
            
            if (successCount === totalCount) {
                html += '<p style="color: green; font-weight: bold;">üéâ Tous les assets sont correctement charg√©s !</p>';
            } else {
                html += '<p style="color: red; font-weight: bold;">‚ö†Ô∏è Certains fichiers sont manquants. V√©rifiez la structure de vos dossiers.</p>';
            }
            
            resultsDiv.innerHTML = html;
        }

        // Lancer les tests
        runTests();
    </script>
</body>
</html>
